@tailwind base;

@custom-variant dark (&:is(.dark *));
@tailwind components;
@tailwind utilities;

/* Marquee animations */
@keyframes marquee {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

@keyframes marquee-vertical {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(calc(-100% - var(--gap)));
  }
}

/* Prevent horizontal scrolling globally */
html, body {
  overflow-x: hidden;
}

/* 3D perspective utilities for CometCard */
.perspective-distant {
  perspective: 1200px;
}

.transform-3d {
  transform-style: preserve-3d;
}

/* Background gradient animations */
@keyframes moveHorizontal {
  0% {
    transform: translateX(-50%) translateY(-10%);
  }
  50% {
    transform: translateX(50%) translateY(10%);
  }
  100% {
    transform: translateX(-50%) translateY(-10%);
  }
}

@keyframes moveInCircle {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes moveVertical {
  0% {
    transform: translateY(-50%);
  }
  50% {
    transform: translateY(50%);
  }
  100% {
    transform: translateY(-50%);
  }
}

/* Animation utility classes */
.animate-first {
  animation: moveVertical 30s ease infinite;
}

.animate-second {
  animation: moveInCircle 20s reverse infinite;
}

.animate-third {
  animation: moveInCircle 40s linear infinite;
}

.animate-fourth {
  animation: moveHorizontal 40s ease infinite;
}

.animate-fifth {
  animation: moveInCircle 20s ease infinite;
}

@layer base {
  :root {
    /* Custom palette (HSL triplets) */
    --manatee: 220 5% 60%;         /* #95989d */
    --abbey: 220 6% 32%;           /* #4e5156 */
    --woodsmoke: 240 4% 3%;        /* #060607 */
    --pale-sky: 210 12% 45%;       /* #69757e */
    --plantation: 190 27% 22%;     /* #2a4447 */
    --shuttle-gray: 215 8% 43%;    /* #656b74 */
    --baltic-sea: 260 5% 16%;      /* #29282c */
    --charade: 215 11% 20%;        /* #2d333c */
    --timber-green: 190 28% 14%;   /* #182b2e */
    --old-lavender: 320 9% 43%;    /* #746473 */
    --old-lavender-light: 320 12% 62%; /* lighter lavender for CTAs */

    /* Engineering-focused Light Theme - Practicality & Simplicity */
    --background: 0 0% 100%;
    --foreground: 0 0% 8%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 8%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 8%;
    --primary: 0 0% 8%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 97%;
    --secondary-foreground: 0 0% 8%;
    --muted: 0 0% 97%;
    --muted-foreground: 0 0% 40%;
    --accent: 0 0% 97%;
    --accent-foreground: 0 0% 8%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 92%;
    --input: 0 0% 97%;
    --ring: 0 0% 8%;
    /* Default radius for non-button components */
    --radius: 0.375rem;

    /* Engineering-inspired accent colors - Subtle & Purposeful */
    --engineering-primary: 0 0% 8%;
    --engineering-secondary: 0 0% 40%;
    --engineering-accent: 200 6% 10%;
    --engineering-success: 142 71% 45%;
    --engineering-warning: 38 92% 50%;
    --engineering-error: 0 72% 51%;
  }

  .dark {
    /* Muted palette mapped to theme tokens */
    --background: var(--woodsmoke);
    --foreground: 0 0% 94%;
    --card: var(--charade);
    --card-foreground: 0 0% 94%;
    --popover: var(--baltic-sea);
    --popover-foreground: 0 0% 94%;
    --primary: 0 0% 94%;
    --primary-foreground: var(--woodsmoke);
    --secondary: var(--abbey);
    --secondary-foreground: 0 0% 92%;
    --muted: var(--baltic-sea);
    --muted-foreground: var(--manatee);
    --accent: var(--plantation);
    --accent-foreground: 0 0% 92%;
    --destructive: 0 65% 45%;
    --destructive-foreground: 0 0% 96%;
    --border: var(--charade);
    --input: var(--charade);
    --ring: 0 0% 92%;
    /* Match default radius in dark theme */
    --radius: 0.375rem;

    /* Monochrome accents */
    --engineering-primary: 0 0% 94%;
    --engineering-secondary: 0 0% 62%;
    --engineering-accent: 0 0% 18%;
    --engineering-success: 142 40% 45%;
    --engineering-warning: 38 60% 52%;
    --engineering-error: 0 65% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans antialiased;
  }

  /* Premium scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }
}

@layer components {
  /* Engineering-inspired glass effect - Subtle & Functional */
  .glass {
    @apply bg-background/90 backdrop-blur-sm border border-border/60;
  }
  /* Dark theme: ensure glass cards are true black instead of gray */
  .dark .glass {
    @apply bg-black;
  }

  /* Engineering-inspired focus states - Precise & Clear */
  .focus-engineering {
    box-shadow: 0 0 0 2px hsl(var(--engineering-primary) / 0.1);
  }

  /* Engineering-inspired gradients - Minimal & Purposeful */
  .gradient-engineering {
    background: linear-gradient(180deg, hsl(var(--background)), hsl(var(--muted) / 0.3));
  }

  /* Primary engineering accent - Clean monochrome */
  .accent-engineering {
    background: hsl(var(--engineering-accent));
    color: hsl(var(--background));
  }

  /* Smooth engineering transitions - Fast & Precise */
  .transition-engineering {
    @apply transition-all duration-150 ease-out;
  }

  /* Engineering hover states - Subtle & Responsive */
  .hover-engineering {
    @apply hover:bg-muted/30 transition-engineering;
  }

  /* Precision borders - Clean lines */
  .border-engineering {
    border: 1px solid hsl(var(--border));
  }

  /* Premium transitions - Smooth & polished animations for interactive elements
     Provides longer, more elegant transitions compared to engineering variants
     Perfect for buttons, cards, and hover states that need refined feel */
  .transition-premium {
    @apply transition-all duration-300 ease-in-out;
  }

  /* Premium gradients - Elegant diagonal gradient for sophisticated backgrounds
     Creates subtle depth with 135-degree angle from background to muted tones
     Ideal for hero sections, cards, and premium UI components */
  .gradient-premium {
    background: linear-gradient(135deg, hsl(var(--background)), hsl(var(--muted) / 0.5));
  }

  /* Theme-responsive gradient - Adapts to light/dark mode
     Creates appropriate atmosphere for both light and dark themes
     Perfect for main app backgrounds and dashboard sections */
  .gradient-dark-blue {
    /* Plain background responsive to theme (keeps class name for compatibility) */
    background: rgb(248 248 248); /* off-white for light theme */
  }

  .dark .gradient-dark-blue {
    background: rgb(15 15 15); /* dark grey for dark theme */
  }

  /* Legacy dark blue gradient - For specific dark-only use cases */
  .gradient-dark-blue-legacy {
    /* Legacy kept, but neutralized to charcoal spectrum */
    background: linear-gradient(to bottom right, rgb(33 33 33), rgb(24 24 24), rgb(0 0 0));
  }

  /* Subtle dark blue gradient for cards and components */
  .gradient-dark-blue-subtle {
    /* Subtle graphite gradient for cards */
    background: linear-gradient(135deg, hsl(var(--card)), hsl(var(--muted) / 0.3));
  }

  /* Progress step indicators - tuned for dark theme to avoid overly bright primary */
  .step-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px; /* rounded-full */
    border-width: 2px;     /* border-2 */
    font-size: 0.875rem;   /* text-sm */
    line-height: 1.25rem;
    font-weight: 500;      /* font-medium */
    transition: all 300ms ease-in-out; /* transition-premium */
  }
  .step-indicator-active {
    background-color: hsl(var(--accent) / 0.4);
    border-color: hsl(var(--accent));
    color: hsl(var(--foreground));
  }
  .step-indicator-inactive {
    border-color: hsl(var(--muted-foreground));
    color: hsl(var(--muted-foreground));
  }
  .step-connector-active {
    background-color: hsl(var(--accent));
  }
  .step-connector-inactive {
    background-color: hsl(var(--muted));
  }

  /* Contrast card style for high-emphasis sections
     - Hairline border (0.5px) for a refined outline on retina screens
     - Dark surface to highlight content while blending with dark UI */
  .card-contrast {
    background-color: rgb(0 0 0 / 1);
    border-color: rgb(255 255 255 / 0.9);
    border-style: solid;
    border-width: 0.5px; /* hairline */
  }

  /* Builder background: subtle pointillism (Supabase-like) responsive to theme
     - Applies a dotted pattern over theme-appropriate surface
     - Use on containers that wrap the builder UI */
  .builder-background {
    /* Light theme: clean white background */
    background-color: hsl(var(--background));
    /* Pointillism pattern with theme-aware dots */
    background-image:
      radial-gradient(circle at 1px 1px, hsl(var(--muted-foreground) / 0.12) 1px, transparent 1px),
      radial-gradient(circle at 0.5px 0.5px, hsl(var(--muted-foreground) / 0.08) 0.5px, transparent 0.5px);
    /* Increase spacing for a more dispersed dot pattern */
    background-size: 18px 18px, 26px 26px;
  }

  /* Dark theme: maintain the welcoming dark tone */
  .dark .builder-background {
    background-color: hsl(220 10% 7%);
    /* Adjust dot opacity for dark theme */
    background-image:
      radial-gradient(circle at 1px 1px, hsl(var(--muted-foreground) / 0.08) 1px, transparent 1px),
      radial-gradient(circle at 0.5px 0.5px, hsl(var(--muted-foreground) / 0.06) 0.5px, transparent 0.5px);
  }
}

@layer utilities {
  /* Floating animations for login page slides */
  @keyframes floatY {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .animate-float-slow {
    animation: floatY 10s ease-in-out infinite;
  }

  .animate-float-medium {
    animation: floatY 8s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: floatY 12s ease-in-out infinite;
    animation-delay: 1.5s;
  }
}

@theme inline {
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
  @keyframes marquee {
  from {
    transform: translateX(0);
    }
  to {
    transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
  from {
    transform: translateY(0);
    }
  to {
    transform: translateY(calc(-100% - var(--gap)));
    }
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}